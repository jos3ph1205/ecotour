---
import { getImage } from "astro:assets";
import grungeBdTop from "../assets/images/grunge/top.png";
import grungeBdBtm from "../assets/images/grunge/btm.png";

const grungeBdTopImg = await getImage({
   src: grungeBdTop,
   format: "webp",
});
const grungeBdBtmImg = await getImage({
   src: grungeBdBtm,
   format: "webp",
});

const { grunge, id } = Astro.props;
---

<div class="grunge-border" data-grunge={grunge} data-id={id}></div>
<script define:vars={{ id, grungeBdTopImg, grungeBdBtmImg }}>
   const grungeBorder = document.querySelector(`.grunge-border[data-id="${id}"]`);
   const gbData = grungeBorder.getAttribute("data-grunge").split(" ");
   const data = [`${gbData[0]}`, `${gbData[1]}`];

   data.forEach((val) => {
      console.log(val)
      let img = '';
      if (val == 'top') {
         img = grungeBdTopImg.src;
      } else if (val == 'btm') {
         img = grungeBdBtmImg.src;
      }

      grungeBorder.style.cssText = `--gb-url-${val}: url(${img});`

      grungeBorder.classList.add(val);
   });
</script>
